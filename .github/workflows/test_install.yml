name: Test CLI Installation

on: [push]

jobs:
  macos-install:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v2
    - name: Create symblink
      run: |
        ln -s ${{ github.workspace }} $HOME/.vim
    - name: Install CLI tools
      run: |
        ./install mac_essentials
    - name: Run list
      run: |
        brew list
    - name: Install Conda
      run: |
        ./install conda
        export PATH="$HOME/miniconda3/bin:$PATH"
        which python
    - name: Install omz
      run: |
        ./install omz
        ls -la $HOME
    - name: Terminal config
      run: |
        ./install terminal_config
    - name: Install Python packages
      run: |
        ./install python_commons
        ./install python_dev

  ubuntu-install:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Create symblink
      run: |
        ln -s ${{ github.workspace }} $HOME/.vim
    - name: Install CLI tools
      run: |
        ./install ubuntu_essentials
    - name: Install Conda
      run: |
        rm -rf /usr/share/miniconda
        ./install conda
        export PATH="$HOME/miniconda3/bin:$PATH"
        which python
    - name: Install omz
      run: |
        ./install omz
        ls -la $HOME
    - name: Install neovim
      run: |
        ./install neovim
        ls -la $HOME/bin
    - name: Terminal config
      run: |
        ./install terminal_config
    - name: Install Python packages
      run: |
        ./install python_commons
        ./install python_dev
